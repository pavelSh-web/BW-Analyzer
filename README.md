# Audio Tags & Features API

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∞—É–¥–∏–æ: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ + –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –º—É–∑—ã–∫–∞–ª—å–Ω—ã—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **PANNs —Ç–µ–≥–∏**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ 527 –∫–ª–∞—Å—Å–∞–º (–∂–∞–Ω—Ä—ã, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è)
- **–¢–µ–º–ø (BPM)**: –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–º–ø–∞ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏
- **–¢–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**: —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –º—É–∑—ã–∫–∞–ª—å–Ω–æ–≥–æ –∫–ª—é—á–∞ (C, D, E, etc.)
- **–†–∞–∑–º–µ—Ä**: –æ—Ü–µ–Ω–∫–∞ –º—É–∑—ã–∫–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ (4/4, 3/4, 6/8, etc.)
- **–°–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏**: —ç–Ω–µ—Ä–≥–∏—è, —è—Ä–∫–æ—Å—Ç—å, —Ç–µ–º–±—Ä–∞–ª—å–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- **–í—Ä–µ–º–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: —Ñ–∞–π–ª—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è, —Ç–æ–ª—å–∫–æ –∞–Ω–∞–ª–∏–∑

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –õ–æ–∫–∞–ª—å–Ω–æ

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
python -m pip install --upgrade pip
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫ API
uvicorn app.main:app --host 0.0.0.0 --port 8001
```

### Docker

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -t audio-analyzer:latest .

# –ó–∞–ø—É—Å–∫
docker run --rm -p 8001:8001 audio-analyzer:latest
```

## üì° API

### POST /analyze

–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∞—É–¥–∏–æ—Ñ–∞–π–ª –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–≥–∏ + —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `file`: –∞—É–¥–∏–æ—Ñ–∞–π–ª (WAV, MP3, FLAC, OGG, M4A)
- `top_tags`: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–ø-—Ç–µ–≥–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```bash
curl -X POST "http://localhost:8001/analyze?top_tags=10" \
  -F "file=@your_track.mp3"
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "filename": "track.mp3",
  "duration_seconds": 180.5,
  "sample_rate": 44100,
  "panns_top_tags": [
    {"label": "Music", "prob": 0.773},
    {"label": "Electronic", "prob": 0.152},
    {"label": "Techno", "prob": 0.089},
    {"label": "House music", "prob": 0.067}
  ],
  "musical_features": {
    "tempo_bpm": 128.5,
    "key": "C",
    "time_signature": "4/4",
    "energy": 0.45,
    "brightness": 2150.3,
    "zero_crossing_rate": 0.12,
    "spectral_rolloff": 3240.1,
    "mfcc_mean": [-123.4, 45.2, ...]
  },
  "elapsed_sec": 2.34
}
```

### GET /

–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–∏—Å–µ –∏ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö.

## üéµ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

- WAV
- MP3
- FLAC
- OGG
- M4A

## üß† –ú–æ–¥–µ–ª–∏

- **PANNs CNN14**: –ø—Ä–µ–¥–æ–±—É—á–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –∞—É–¥–∏–æ-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ (527 –∫–ª–∞—Å—Å–æ–≤)
- **librosa**: –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –º—É–∑—ã–∫–∞–ª—å–Ω—ã—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫

## ‚ö° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ë–µ–∑ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è**: —Ñ–∞–π–ª—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∏ —Å—Ä–∞–∑—É —É–¥–∞–ª—è—é—Ç—Å—è
- **–ë—ã—Å—Ç—Ä—ã–π –∞–Ω–∞–ª–∏–∑**: —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞ 2-5 —Å–µ–∫—É–Ω–¥ –Ω–∞ CPU
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞**: –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —É–¥–∞–ª—è—é—Ç—Å—è –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **REST API**: –ø—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ª—é–±—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

## üìä –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `tempo_bpm` | –¢–µ–º–ø –≤ —É–¥–∞—Ä–∞—Ö –≤ –º–∏–Ω—É—Ç—É |
| `key` | –ú—É–∑—ã–∫–∞–ª—å–Ω–∞—è —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (C, C#, D, ...) |
| `time_signature` | –†–∞–∑–º–µ—Ä (4/4, 3/4, 6/8, etc.) |
| `energy` | –û–±—â–∞—è —ç–Ω–µ—Ä–≥–∏—è —Ç—Ä–µ–∫–∞ |
| `brightness` | –°–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π —Ü–µ–Ω—Ç—Ä–æ–∏–¥ (—è—Ä–∫–æ—Å—Ç—å) |
| `zero_crossing_rate` | –ß–∞—Å—Ç–æ—Ç–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π –Ω—É–ª—è |
| `spectral_rolloff` | –°–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π rolloff |
| `mfcc_mean` | MFCC –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã (—Ç–µ–º–±—Ä) |

## üè∑Ô∏è PANNs —Ç–µ–≥–∏

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:
- **–ñ–∞–Ω—Ä—ã**: Rock, Pop, Jazz, Classical, Electronic, etc.
- **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã**: Guitar, Piano, Drums, Violin, etc.
- **–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏—è**: Happy, Sad, Energetic, Calm, etc.
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç**: Music, Speech, Applause, Silence, etc.

API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: http://localhost:8001/docs